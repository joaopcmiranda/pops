# Cloudflare Tunnel ingress rules
# This config is referenced by the cloudflared container.
# The tunnel token itself is passed via TUNNEL_TOKEN environment variable.

ingress:
  - hostname: {{ cf_subdomain_pwa }}.{{ domain }}
    service: http://pops-pwa:80

  - hostname: {{ cf_subdomain_api }}.{{ domain }}
    service: http://pops-finance-api:3000

  - hostname: {{ cf_subdomain_metabase }}.{{ domain }}
    service: http://pops-metabase:3000

  - hostname: {{ cf_subdomain_paperless }}.{{ domain }}
    service: http://pops-paperless:8000

  # Catch-all: return 404 for unmatched requests
  - service: http_status:404
