/**
 * Initialize empty database for local development
 * Run with: tsx scripts/init-db.ts
 */
import BetterSqlite3 from "better-sqlite3";
import { mkdirSync } from "node:fs";
import { dirname } from "node:path";
import { initializeSchema } from "../src/db/schema.js";

const DB_PATH = process.env.SQLITE_PATH ?? "./data/pops.db";

// Create data directory if it doesn't exist
mkdirSync(dirname(DB_PATH), { recursive: true });

const db = new BetterSqlite3(DB_PATH);
db.pragma("journal_mode = WAL");
db.pragma("busy_timeout = 5000");

initializeSchema(db);

console.log(`‚úÖ Database initialized at ${DB_PATH}`);
console.log("üìù Note: Database is empty. Run notion-sync to populate with real data.");

db.close();
